<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ruoyi.project.system.mapper.WebPatientMapper">




    <select id="selectPANumByUserId" parameterType="Long" resultType="int">
        select count(1)
        from sys_appoint  a
        left join web_patient p on p.patient_id=a.patient_id
        left join sys_account ac on p.user_id=ac.user_id
        where ac.user_id = #{userid} and a.status=0
        <if test="banTime != null and banTime != ''">
            and a.time>banTime
        </if>

    </select>

<!--    <insert id="insertPatient" parameterType="WebPatient" useGeneratedKeys="true" keyProperty="patientId">-->
<!--        insert into web_patient(patient_id, idCard, user_id)-->
<!--        values (default, #{patient.idCard}, #{patient.userId})-->
<!--    </insert>-->

<!--    <insert id="insertAccount" parameterType="WebPatient" useGeneratedKeys="true" keyProperty="userId">-->
<!--        insert into sys_account(user_id, name, password, role_id)-->
<!--        values (default, #{patient.name}, #{patient.password},'3')-->
<!--    </insert>-->

<!--    <update id="updatePatient" parameterType="WebPatient">-->
<!--        update web_patient-->
<!--        <set>-->
<!--            idCard = #{patient.idCard}-->
<!--        </set>-->

<!--        where user_id = #{patient.userId}-->
<!--    </update>-->

<!--    <update id="updateAccount" parameterType="WebPatient">-->
<!--        update sys_account-->
<!--        <set>-->
<!--            name = #{patient.name},-->
<!--            password = #{patient.password}-->
<!--        </set>-->

<!--        where user_id = #{patient.userId}-->
<!--    </update>-->


</mapper>